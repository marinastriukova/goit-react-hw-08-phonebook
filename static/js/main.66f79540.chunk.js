(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{16:function(e,t,r){"use strict";var n=r(4),c=Object(n.b)("phonebook/fetchItemsRequest"),a=Object(n.b)("phonebook/fetchItemsSuccess"),o=Object(n.b)("phonebook/fetchItemsError"),u=Object(n.b)("phonebook/addContactRequest"),s=Object(n.b)("phonebook/addContactSuccess"),i=Object(n.b)("phonebook/addContactError"),b=Object(n.b)("phonebook/deleteContactRequest"),j=Object(n.b)("phonebook/deleteContactSuccess"),l=Object(n.b)("phonebook/deleteContactError"),O=Object(n.b)("phonebook/changeFilter");t.a={fetchItemsRequest:c,fetchItemsSuccess:a,fetchItemsError:o,addContactRequest:u,addContactSuccess:s,addContactError:i,deleteContactRequest:b,deleteContactSuccess:j,deleteContactError:l,changeFilter:O}},17:function(e,t,r){e.exports={header:"AppBar_header__2i6og",link:"AppBar_link__eFOEz",activeLink:"AppBar_activeLink__5UX6a AppBar_link__eFOEz"}},2:function(e,t,r){"use strict";var n=r(4),c=Object(n.b)("auth/registerRequest"),a=Object(n.b)("auth/registerSuccess"),o=Object(n.b)("auth/registerError"),u=Object(n.b)("auth/loginRequest"),s=Object(n.b)("auth/loginSuccess"),i=Object(n.b)("auth/loginError"),b=Object(n.b)("auth/logoutRequest"),j=Object(n.b)("auth/logoutSuccess"),l=Object(n.b)("auth/logoutError"),O=Object(n.b)("auth/getCurrentUserRequest"),d=Object(n.b)("auth/getCurrentUserSuccess"),h=Object(n.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:a,registerError:o,logoutRequest:b,logoutSuccess:j,logoutError:l,loginRequest:u,loginSuccess:s,loginError:i,getCurrentUserRequest:O,getCurrentUserSuccess:d,getCurrentUserError:h}},28:function(e,t,r){"use strict";var n,c,a,o,u=r(3),s=r(7),i=r(4),b=r(2),j=(r(9),{name:null,email:null,password:null}),l=Object(i.c)(j,(n={},Object(u.a)(n,b.a.registerSuccess,(function(e,t){return t.payload.user})),Object(u.a)(n,b.a.loginSuccess,(function(e,t){return t.payload.user})),Object(u.a)(n,b.a.logoutSuccess,(function(){return j})),Object(u.a)(n,b.a.getCurrentUserSuccess,(function(e,t){return t.payload})),n)),O=Object(i.c)(null,(c={},Object(u.a)(c,b.a.registerSuccess,(function(e,t){return t.payload.token})),Object(u.a)(c,b.a.loginSuccess,(function(e,t){return t.payload.token})),Object(u.a)(c,b.a.logoutSuccess,(function(){return null})),c)),d=function(e,t){return t.payload},h=Object(i.c)(null,(a={},Object(u.a)(a,b.a.registerError,d),Object(u.a)(a,b.a.loginError,d),Object(u.a)(a,b.a.logoutError,d),Object(u.a)(a,b.a.getCurrentUserError,d),a)),f=Object(i.c)(!1,(o={},Object(u.a)(o,b.a.registerSuccess,(function(){return!0})),Object(u.a)(o,b.a.loginSuccess,(function(){return!0})),Object(u.a)(o,b.a.getCurrentUserSuccess,(function(){return!0})),Object(u.a)(o,b.a.logoutRequest,(function(){return!0})),Object(u.a)(o,b.a.logoutError,(function(){return!0})),Object(u.a)(o,b.a.registerRequest,(function(){return!1})),Object(u.a)(o,b.a.registerError,(function(){return!1})),Object(u.a)(o,b.a.loginRequest,(function(){return!1})),Object(u.a)(o,b.a.loginError,(function(){return!1})),Object(u.a)(o,b.a.getCurrentUserRequest,(function(){return!1})),Object(u.a)(o,b.a.getCurrentUserError,(function(){return!1})),Object(u.a)(o,b.a.logoutSuccess,(function(){return!1})),o));t.a=Object(s.c)({user:l,token:O,isAuthenticated:f,error:h})},56:function(e,t,r){},82:function(e,t,r){},85:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(25),a=r.n(c),o=(r(56),r(36)),u=r(37),s=r(39),i=r(38),b=r(6),j=r(20),l=r(30),O=r(8),d=r(9),h=r(1),f=Object(O.b)((function(e){return{isAuthenticated:d.b.getIsAuthenticated(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(l.a)(e,["component","isAuthenticated","redirectTo"]);return Object(h.jsx)(b.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return r?Object(h.jsx)(t,Object(j.a)({},e)):Object(h.jsx)(b.a,{to:n})}}))})),g=Object(O.b)((function(e){return{isAuthenticated:d.b.getIsAuthenticated(e)}}))((function(e){var t=e.component,r=e.isAuthenticated,n=e.redirectTo,c=Object(l.a)(e,["component","isAuthenticated","redirectTo"]);return Object(h.jsx)(b.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return r&&c.restricted?Object(h.jsx)(b.a,{to:n}):Object(h.jsx)(t,Object(j.a)({},e))}}))})),p=(r(82),r(15)),m=r(17),k=r.n(m),x=Object(O.b)((function(e){return{isAuthenticated:d.b.getIsAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return Object(h.jsxs)("nav",{children:[Object(h.jsx)(p.b,{to:"/",className:k.a.link,children:"Home"}),t&&Object(h.jsx)(p.b,{to:"/phonebook",className:k.a.link,children:"Phonebook"})]})})),v=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(p.b,{to:"/register",className:k.a.link,activeClassName:k.a.activeLink,children:"Register"}),Object(h.jsx)(p.b,{to:"/login",className:k.a.link,activeClassName:k.a.activeLink,children:"Login"})]})},C={container:{display:"flex",alignItems:"center"},name:{fontWeight:700,marginRight:12},button:{padding:3,backgroundColor:"rgb(151, 155, 208)"}};var S,E,y={onLogout:d.a.logOut},R=Object(O.b)((function(e){return{name:d.b.getUsername(e)}}),y)((function(e){var t=e.name,r=e.onLogout;return Object(h.jsxs)("div",{style:C.container,children:[Object(h.jsxs)("span",{style:C.name,children:["Welcome, ",t]}),Object(h.jsx)("button",{style:C.button,type:"button",onClick:r,children:"Logout"})]})})),q=Object(O.b)((function(e){return{isAuthenticated:d.b.getIsAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return Object(h.jsxs)("header",{className:k.a.header,children:[Object(h.jsx)(x,{}),t?Object(h.jsx)(R,{}):Object(h.jsx)(v,{})]})})),A=Object(n.lazy)((function(){return r.e(7).then(r.bind(null,96))})),U=Object(n.lazy)((function(){return Promise.all([r.e(6),r.e(3)]).then(r.bind(null,99))})),I=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,97))})),w=Object(n.lazy)((function(){return r.e(5).then(r.bind(null,98))})),_=function(e){Object(s.a)(r,e);var t=Object(i.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(q,{}),Object(h.jsx)(n.Suspense,{fallback:Object(h.jsx)("h1",{children:"Loader..."}),children:Object(h.jsxs)(b.d,{children:[Object(h.jsx)(g,{path:"/",exact:!0,component:A}),Object(h.jsx)(g,{path:"/register",restricted:!0,redirectTo:"/phonebook",component:w}),Object(h.jsx)(g,{path:"/login",restricted:!0,redirectTo:"/phonebook",component:I}),Object(h.jsx)(f,{path:"/phonebook",redirectTo:"/login",component:U})]})})]})}}]),r}(n.Component),L={onGetCurrentUser:d.a.getCurrentUser},z=Object(O.b)(null,L)(_),T=r(29),N=r(4),B=r(19),F=r(50),G=r.n(F),J=r(3),P=r(7),W=r(16),D=W.a.fetchItemsRequest,H=W.a.fetchItemsSuccess,M=W.a.fetchItemsError,X=W.a.addContactRequest,K=W.a.addContactSuccess,Q=W.a.addContactError,V=W.a.deleteContactRequest,Y=W.a.deleteContactSuccess,Z=W.a.deleteContactError,$=W.a.changeFilter,ee=Object(N.c)([],(S={},Object(J.a)(S,H,(function(e,t){return t.payload})),Object(J.a)(S,K,(function(e,t){var r=t.payload;return[].concat(Object(T.a)(e),[r])})),Object(J.a)(S,Y,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),S)),te=Object(N.c)("",Object(J.a)({},$,(function(e,t){return t.payload}))),re=Object(N.c)(!1,(E={},Object(J.a)(E,D,(function(){return!0})),Object(J.a)(E,H,(function(){return!1})),Object(J.a)(E,M,(function(){return!1})),Object(J.a)(E,X,(function(){return!0})),Object(J.a)(E,K,(function(){return!1})),Object(J.a)(E,Q,(function(){return!1})),Object(J.a)(E,V,(function(){return!0})),Object(J.a)(E,Y,(function(){return!1})),Object(J.a)(E,Z,(function(){return!1})),E)),ne=Object(P.c)({items:ee,filter:te,loading:re}),ce=r(28),ae=Object(T.a)(Object(N.d)({serializableCheck:{ignoredActions:[B.a,B.f,B.b,B.c,B.d,B.e]}})),oe={key:"auth",storage:G.a,whitelist:["token"]},ue=Object(N.a)({reducer:{auth:Object(B.g)(oe,ce.a),contacts:ne},middleware:ae,devTools:!1}),se={store:ue,persistor:Object(B.h)(ue)},ie=r(51);a.a.render(Object(h.jsx)(O.a,{store:se.store,children:Object(h.jsx)(ie.a,{loading:null,persistor:se.persistor,children:Object(h.jsx)(p.a,{children:Object(h.jsx)(z,{})})})}),document.getElementById("root"))},9:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return l}));var n=r(2),c=(r(28),r(18)),a=r.n(c),o=r(24),u=r(21),s=r.n(u);s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){s.a.defaults.headers.common.Authorization=""},j={register:function(e){return function(){var t=Object(o.a)(a.a.mark((function t(r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(n.a.registerRequest()),t.prev=1,t.next=4,s.a.post("/users/signup",e);case 4:c=t.sent,i(c.data.token),r(n.a.registerSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(n.a.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(o.a)(a.a.mark((function t(r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(n.a.loginRequest()),t.prev=1,t.next=4,s.a.post("/users/login",e);case 4:c=t.sent,i(c.data.token),r(n.a.loginSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(n.a.logoutError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(o.a)(a.a.mark((function e(t,r){var c,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r(),o=c.auth.token){e.next=3;break}return e.abrupt("return");case 3:return i(o),t(n.a.getCurrentUserRequest()),e.prev=5,e.next=8,s.a.get("/users/current");case 8:u=e.sent,t(n.a.getCurrentUserSuccess(u.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(n.a.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(n.a.logoutRequest()),e.prev=1,e.next=4,s.a.post("/users/logout");case 4:b(),t(n.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(n.a.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},l={getIsAuthenticated:function(e){return e.auth.isAuthenticated},getUsername:function(e){return e.auth.user.name}}}},[[85,1,2]]]);
//# sourceMappingURL=main.66f79540.chunk.js.map